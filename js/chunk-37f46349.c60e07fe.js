(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37f46349"],{"3d4f":function(t,e,c){"use strict";var a=function(t){return{all:t=t||new Map,on:function(e,c){var a=t.get(e);a?a.push(c):t.set(e,[c])},off:function(e,c){var a=t.get(e);a&&(c?a.splice(a.indexOf(c)>>>0,1):t.set(e,[]))},emit:function(e,c){var a=t.get(e);a&&a.slice().map((function(t){t(c)})),(a=t.get("*"))&&a.slice().map((function(t){t(e,c)}))}}},o=a();e["a"]=o},6034:function(t,e,c){"use strict";c.r(e);c("b0c0");var a=c("7a23"),o={id:"main",class:"container-lg content"},n=Object(a["createVNode"])("h2",{class:"pt-4 text-light"},"確認購物車",-1),r={class:"w-100 w-lg-75 mx-auto"},s=Object(a["createVNode"])("div",{class:"bg-light p-3 pb-1 my-3"},[Object(a["createVNode"])("figure",{class:"text-center mx-auto"},[Object(a["createVNode"])("img",{class:"img-fluid",src:"https://storage.googleapis.com/vue-course-api.appspot.com/leolee/1626638211897.png?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=cE9cq%2FuejGmjfshmJWikytVxp1UR98rJprDbTcN9R7qyaqv9AGb4Nxrt5eNf9naqv1a7MIc9wQmEUGPppvJv%2BjhHz9do1NAk5xS6EyIDOG1ZOY7E5JXOECmeXUgnDZy2W1hbBAyB0lIsASpoSW8H2AywjxzMYFE%2FHboUtkzswdjy5tDy07DBmpnAM9udZ6KRX8DxpBwZqhYNE9u18aFpNC5O3TXoafvGsgvOx7d%2B10siwv%2FlWYYPe925Q3eR67yfRHol3RSioPgSiIPE9t9l%2BQHRiKdzszK15bDfahZlDlDbnDyTf7gv0S0L7QhM5rj14j8ELLYCuy3%2FjFAhsAXPNA%3D%3D",alt:"step1 確認購物車"})])],-1),l={class:"text-end mb-2"},i={key:0,class:"material-icons animate-spin"},d=Object(a["createTextVNode"])(" 清空購物車 "),u={class:"bg-opacity my-3 p-3"},b={class:"p-table table align-middle"},p=Object(a["createVNode"])("thead",{class:"p-table__head"},[Object(a["createVNode"])("tr",{class:"text-light"},[Object(a["createVNode"])("th",{width:"30%",class:"text-center fs-7 fs-sm-6"},"商品"),Object(a["createVNode"])("th",{class:"p-table__th--num text-center fs-7 fs-sm-6"},"數量"),Object(a["createVNode"])("th",{width:"20%",class:"text-end fs-7 fs-sm-6"},"小計"),Object(a["createVNode"])("th",{width:"20%"})])],-1),j={class:"p-table__body"},m={key:1},O={class:"text-danger"},g={class:"p-table__foot"},f={class:"text-light"},h={colspan:"2"},N={key:0,class:"input-group mb-1 input-group-sm"},k={class:"input-group-append"},y={key:0,class:"material-icons animate-spin"},V=Object(a["createTextVNode"])(" 套用優惠碼 "),v={key:0,colspan:"2",class:"text-end"},x={key:0},B={key:1,class:"text-end"},C={key:0},w={colspan:"4",class:"text-end text-light"},S={class:"d-flex justify-content-between"},D=Object(a["createTextVNode"])("繼續購物"),_=Object(a["createTextVNode"])("下一步"),A=Object(a["createVNode"])("span",{class:"fs-5 material-icons mb-1"}," arrow_forward ",-1),I={key:1,class:"row"},F={class:"col-12 col-md-6"},T={class:"mx-auto position-relative"},E=Object(a["createVNode"])("img",{src:"https://storage.googleapis.com/vue-course-api.appspot.com/leolee/1627713231125.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=KA109n1zVjPEbxfGqLQLXvS8BDx%2By653lSnylXeUDyf7%2BI8SboUVFMz4GWYfvMuXWIBqyR2h3r2MkO3D2a1ZYFFi9Woqep1VI4t2hovPJLG0yHpFat0zzZfYZLC%2B5N%2B89AuTqMlPFsqBpy80GBkcOP0DNyjxmNz1lGaFYwMd3IhQk8kncQdDyHWKveZgd67HT4kyk3YyhaCoA9LWHmUyWfQzUHqYnLxknpm%2FSdyqeLFO6itKEhTVJgIGoAzRwrNtKnnSNKBD%2BbLgBVKQdpp15SukuChXCRdUyev0%2BmutlX%2FN5sSYPM1StGheiypaEa2HyjyvB6qL7wYoY6%2FMLqkNAQ%3D%3D",alt:"請先將商品加入購物車",class:"img-fluid"},null,-1),L={class:"col-12 col-md-6 d-flex flex-wrap"},q={class:"nav-products w-100"},P=Object(a["createVNode"])("p",{class:"h3"},"選擇商品類別",-1),$={class:"nav-products__lists cart-list mt-3","data-aos":"fade-up","data-aos-easing":"linear","data-aos-duration":"600"},z={class:"nav-products__list"},M=Object(a["createVNode"])("span",null,"所有商品",-1),Y={class:"mt-auto d-flex mb-4 w-100"},G=Object(a["createTextVNode"])("繼續購物");function U(t,e,c,U,H,Q){var R,W,X=Object(a["resolveComponent"])("Loading"),K=Object(a["resolveComponent"])("UserCart"),Z=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(X,{active:H.isLoading,"z-index":1060},null,8,["active"]),Object(a["createVNode"])("main",o,[n,Object(a["createVNode"])("div",r,[H.cart.total>0?(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},[s,Object(a["createVNode"])("div",l,[Object(a["createVNode"])("button",{class:"btn btn-outline-light",type:"button",onClick:e[1]||(e[1]=function(){return Q.deleteCartAll&&Q.deleteCartAll.apply(Q,arguments)}),disabled:H.cart.carts<=1},[1===H.loadingStatus.loadingItem?(Object(a["openBlock"])(),Object(a["createBlock"])("span",i," cached ")):Object(a["createCommentVNode"])("",!0),d],8,["disabled"])])],64)):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("div",u,[H.cart.total>0?(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},[Object(a["createVNode"])("table",b,[p,Object(a["createVNode"])("tbody",j,[H.cart.carts?(Object(a["openBlock"])(),Object(a["createBlock"])(K,{key:0,loading:H.loadingStatus,cartitem:H.cart,onDeleteCart:Q.deleteCart,onAddProductNum:Q.addProductNum,onCutProductNum:Q.cutProductNum},null,8,["loading","cartitem","onDeleteCart","onAddProductNum","onCutProductNum"])):Object(a["createCommentVNode"])("",!0),this.message?(Object(a["openBlock"])(),Object(a["createBlock"])("tr",m,[Object(a["createVNode"])("td",null,[Object(a["createVNode"])("span",O,Object(a["toDisplayString"])(this.message),1)])])):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("tfoot",g,[Object(a["createVNode"])("tr",f,[Object(a["createVNode"])("td",h,[H.cart.final_total==H.cart.total?(Object(a["openBlock"])(),Object(a["createBlock"])("div",N,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=function(t){return H.coupon_code=t}),placeholder:"請輸入優惠碼",disabled:H.cart.final_total!==H.cart.total},null,8,["disabled"]),[[a["vModelText"],H.coupon_code]]),Object(a["createVNode"])("div",k,[Object(a["createVNode"])("button",{class:"btn btn-sm btn-outline-light ms-2",type:"button",onClick:e[3]||(e[3]=function(t){return Q.addCouponCode()}),disabled:H.cart.final_total!==H.cart.total},[3===H.loadingStatus.loadingItem?(Object(a["openBlock"])(),Object(a["createBlock"])("span",y," cached ")):Object(a["createCommentVNode"])("",!0),V],8,["disabled"])])])):Object(a["createCommentVNode"])("",!0)]),(null===(R=H.cart)||void 0===R||null===(W=R.carts)||void 0===W?void 0:W.length)>=1?(Object(a["openBlock"])(),Object(a["createBlock"])("td",v,[H.cart.final_total!==H.cart.total?(Object(a["openBlock"])(),Object(a["createBlock"])("del",x," 總計： "+Object(a["toDisplayString"])(t.$filters.currency(this.cart.total))+" NTD",1)):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])("總計： "+Object(a["toDisplayString"])(t.$filters.currency(this.cart.total))+" NTD",1)],64))])):(Object(a["openBlock"])(),Object(a["createBlock"])("td",B,"尚無商品"))]),H.cart.final_total!==H.cart.total?(Object(a["openBlock"])(),Object(a["createBlock"])("tr",C,[Object(a["createVNode"])("td",w," 折扣價： "+Object(a["toDisplayString"])(t.$filters.currency(H.cart.final_total))+" NTD ",1)])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])("div",S,[Object(a["createVNode"])(Z,{class:"btn btn-secondary",to:"/products"},{default:Object(a["withCtx"])((function(){return[D]})),_:1}),Object(a["createVNode"])(Z,{class:["btn btn-nobeta",{disabled:H.cart.carts<=1}],"aria-disabled":H.cart.carts<=1,to:"/cartcheck"},{default:Object(a["withCtx"])((function(){return[_,A]})),_:1},8,["aria-disabled","class"])])],64)):(Object(a["openBlock"])(),Object(a["createBlock"])("div",I,[Object(a["createVNode"])("div",F,[Object(a["createVNode"])("p",T,[Object(a["createVNode"])(Z,{class:"stretched-link",to:"/products"},{default:Object(a["withCtx"])((function(){return[E]})),_:1})])]),Object(a["createVNode"])("div",L,[Object(a["createVNode"])("nav",q,[P,Object(a["createVNode"])("ul",$,[Object(a["createVNode"])("li",z,[Object(a["createVNode"])("a",{href:"#","aria-current":"true",onClick:e[4]||(e[4]=Object(a["withModifiers"])((function(t){return Q.clickCategory()}),["prevent"]))},[M])]),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(this.category,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:t.name,class:"nav-products__list"},[Object(a["createVNode"])("a",{href:"#","aria-current":"true",onClick:Object(a["withModifiers"])((function(e){return Q.clickCategory(t.name)}),["prevent"])},[Object(a["createVNode"])("span",null,Object(a["toDisplayString"])(t.name),1)],8,["onClick"])])})),128))])]),Object(a["createVNode"])("div",Y,[Object(a["createVNode"])(Z,{class:"btn btn-nobeta w-100",to:"/products"},{default:Object(a["withCtx"])((function(){return[G]})),_:1})])])]))])])])],64)}c("99af");var H=c("3d4f"),Q={class:"d-sm-flex align-items-center"},R={class:"ps-sm-2"},W={class:"badge bg-nobeta"},X={class:"fs-7 fs-sm-6 mb-1"},K={key:0,class:"badge bg-success fs-8 fs-sm-7"},Z={class:"input-group"},J={class:"input-group input-group-sm text-center mb-3 w-75 mx-auto"},tt=Object(a["createVNode"])("span",null,"-",-1),et={class:"form-control m-0 fs-7 fs-sm-6"},ct=Object(a["createVNode"])("span",null,"+",-1),at={class:"text-end fs-7 fs-sm-6"},ot={key:0,class:"text-success"},nt=Object(a["createVNode"])("br",null,null,-1),rt={class:"text-dark"},st={class:"text-end"},lt={key:0,class:"material-icons animate-spin"},it=Object(a["createTextVNode"])(" 刪除 ");function dt(t,e,c,o,n,r){var s=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(c.cartitem.carts,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e.id},[Object(a["createVNode"])("td",null,[Object(a["createVNode"])(s,{class:"p-table__link text-decoration-none",to:"/product/".concat(e.product.id)},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("figure",Q,[Object(a["createVNode"])("img",{class:"product-img d-none d-sm-block",src:e.product.imageUrl,alt:e.product.title},null,8,["src","alt"]),Object(a["createVNode"])("figcaption",R,[Object(a["createVNode"])("span",W,Object(a["toDisplayString"])(e.product.category),1),Object(a["createVNode"])("p",X,Object(a["toDisplayString"])(e.product.title),1),e.coupon?(Object(a["openBlock"])(),Object(a["createBlock"])("div",K," 已套用優惠券 ")):Object(a["createCommentVNode"])("",!0)])])]})),_:2},1032,["to"])]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",Z,[Object(a["createVNode"])("div",J,[Object(a["createVNode"])("button",{type:"button",onClick:function(c){return t.$emit("cut-product-num",e)},class:["btn-dark btn input-group-text rounded-0 fs-8 border-end-0",{disabled:e.qty<=1}],disabled:e.id===c.loading.loadingItem},[tt],10,["onClick","disabled"]),Object(a["createVNode"])("p",et,Object(a["toDisplayString"])(e.qty),1),Object(a["createVNode"])("button",{type:"button",onClick:function(c){return t.$emit("add-product-num",e)},class:"btn-dark btn input-group-text rounded-0 fs-8",disabled:e.id===c.loading.loadingItem},[ct],8,["onClick","disabled"])])])]),Object(a["createVNode"])("td",at,[e.final_total!==e.total?(Object(a["openBlock"])(),Object(a["createBlock"])("small",ot,[Object(a["createTextVNode"])("折扣價："+Object(a["toDisplayString"])(t.$filters.currency(e.final_total))+" NTD",1),nt,Object(a["createVNode"])("del",rt,Object(a["toDisplayString"])(t.$filters.currency(e.total))+" NTD",1)])):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.$filters.currency(e.total))+" NTD",1)],64))]),Object(a["createVNode"])("td",st,[Object(a["createVNode"])("button",{onClick:function(c){return t.$emit("delete-cart",e)},type:"button",class:"btn btn-outline-secondary btn-sm fs-7 fs-sm-6"},[c.loading.loadingItem===e.id?(Object(a["openBlock"])(),Object(a["createBlock"])("span",lt," cached ")):Object(a["createCommentVNode"])("",!0),it],8,["onClick"])])])})),128)}var ut={emits:["delete-cart","add-product-num","cut-product-num"],props:{cartitem:{type:Object,default:function(){return{}}},loading:{type:Object,default:function(){return{}}}}};ut.render=dt;var bt=ut,pt={data:function(){return{isLoading:!1,loadingStatus:{loadingItem:""},cart:"",coupon_code:"",message:"",category:[{name:"諾貝塔"},{name:"塔妮亞"},{name:"莫妮卡"},{name:"其他周邊"}]}},components:{UserCart:bt},methods:{showAlert:function(t){this.$swal(t.data.message)},showErrorAlert:function(t){this.$swal({title:t,icon:"error"})},deleteCartAll:function(){var t=this;this.loadingStatus.loadingItem=1;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/carts");this.$http.delete(e).then((function(e){e.data.success&&(t.loadingStatus.loadingItem="",t.showAlert(e),t.getCart())})).catch((function(e){t.showErrorAlert(e)}))},getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart");this.isLoading=!0,this.$http.get(e).then((function(e){e.data.success?(t.cart=e.data.data,H["a"].emit("update-cart"),t.isLoading=!1):t.isLoading=!1})).catch((function(e){t.showErrorAlert(e)}))},deleteCart:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart/").concat(t.id);this.$http.delete(c).then((function(t){t.data.success&&(e.loadingStatus.loadingItem="",e.showAlert(t),e.getCart())})).catch((function(t){e.showErrorAlert(t)}))},cutProductNum:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c={data:{product_id:t.product.id,qty:t.qty-=1}},a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart/").concat(t.id);this.$http.put(a,c).then((function(t){t.data.success&&(e.loadingStatus.loadingItem="",e.getCart())})).catch((function(t){e.showErrorAlert(t)}))},addProductNum:function(t){var e=this;this.loadingStatus.loadingItem=t.id;var c={data:{product_id:t.product.id,qty:t.qty+=1}},a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/cart/").concat(t.id);this.$http.put(a,c).then((function(t){t.data.success&&(e.loadingStatus.loadingItem="",e.getCart())})).catch((function(t){e.showErrorAlert(t)}))},addCouponCode:function(){var t=this;this.loadingStatus.loadingItem=3;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("leolee","/coupon"),c={code:this.coupon_code};this.$http.post(e,{data:c}).then((function(e){e.data.success?(t.loadingStatus.loadingItem="",t.showAlert(e),t.coupon_code="",t.message="",t.getCart()):(t.coupon_code="",t.loadingStatus.loadingItem="",t.message=e.data.message)})).catch((function(e){t.showErrorAlert(e)}))},clickCategory:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";H["a"].emit("categoryTop",t),this.$router.push("/products/")}},mounted:function(){this.getCart()}};pt.render=U;e["default"]=pt},b0c0:function(t,e,c){var a=c("83ab"),o=c("9bf2").f,n=Function.prototype,r=n.toString,s=/^\s*function ([^ (]*)/,l="name";a&&!(l in n)&&o(n,l,{configurable:!0,get:function(){try{return r.call(this).match(s)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-37f46349.c60e07fe.js.map