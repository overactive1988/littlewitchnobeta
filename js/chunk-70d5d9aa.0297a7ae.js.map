{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/cart/CartOrder.vue","webpack:///./src/views/cart/CartOrder.vue?376a"],"names":["DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","this","match","error","class","src","alt","width","order","products","item","key","product","imageUrl","title","category","qty","$filters","currency","total","user","name","address","email","payment_method","type","payment","loadingStatus","loadingItem","data","methods","showAlert","res","$swal","message","showErrorAlert","icon","getOrder","id","$route","params","url","$http","then","catch","post","success","$router","push","mounted","render"],"mappings":"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","file":"js/chunk-70d5d9aa.0297a7ae.js","sourcesContent":["var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","<template>\n  <h2 class=\"pt-4 text-light\">完成下訂</h2>\n  <div class=\"w-100 w-lg-75 mx-auto\">\n    <div class=\"bg-light p-3 pb-1 my-3\">\n      <figure class=\"text-center mx-auto\">\n        <img\n          class=\"img-fluid\"\n          src=\"https://storage.googleapis.com/vue-course-api.appspot.com/leolee/1626638315773.png?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=NAzscr3NADSvZ5T%2FO1PKZsVwLaMgiErpdNX2PjCqeKouBzWLfyZvcvGPgqyAE%2FP2Kh0TVGbHsgb9oIY6mWd9qk8hB09lQrfHozajWcUm6JZqz%2F0GrOlyR7sR2YTLPj6v2X9A660jp3Xs2qVkfMEGBHSYWUpG2BUzc9%2BE2BiagVh7iV3xrZeZOtmSHQJLjJLZDDQoD7JdFOXQH4Gp3WQjIoOIQ0fkWF1oSo1MVLlCuubgLpTDdGXf3CYTHgnWaJkXKyKgh%2F2Kjd6wa9q7gabCxHQBud6hQ31yf5V%2BYXDrF2xNLAbcM6BwSPHJi8lt%2F0p19uXvyIOhdDU4M6bKw3d59g%3D%3D\"\n          alt=\"step4 完成下訂\"\n        />\n      </figure>\n    </div>\n    <div class=\"row justify-content-center mt-3 mt-md-5\">\n      <div class=\"col-12\">\n        <div class=\"bg-opacity p-3\">\n          <h3 class=\"text-center mb-3\">購買品項</h3>\n          <table class=\"p-table table align-middle mx-auto\">\n            <thead class=\"p-table__head\">\n              <tr class=\"text-light\">\n                <th width=\"40%\" class=\"text-center fs-7 fs-sm-6\">商品</th>\n                <th class=\"p-table__th--num text-center fs-7 fs-sm-6\">數量</th>\n              </tr>\n            </thead>\n            <tbody class=\"p-table__body\">\n              <tr v-for=\"item in order.products\" :key=\"item\">\n                <td>\n                  <figure class=\"d-sm-flex align-items-center\">\n                    <img\n                      class=\"product-img\"\n                      :src=\"item.product.imageUrl\"\n                      :alt=\"item.product.title\"\n                    />\n                    <figcaption class=\"ps-2\">\n                      <span class=\"badge bg-nobeta\">{{\n                        item.product.category\n                      }}</span>\n                      <p class=\"fs-7 fs-sm-6\">{{ item.product.title }}</p>\n                    </figcaption>\n                  </figure>\n                </td>\n                <td class=\"text-center\">\n                  {{ item.qty }}\n                </td>\n              </tr>\n            </tbody>\n            <tfoot class=\"p-table__foot\">\n              <tr class=\"text-light\">\n                <td class=\"text-end\">總計</td>\n                <td class=\"text-center\">\n                  {{ $filters.currency(order.total) }} NTD\n                </td>\n              </tr>\n            </tfoot>\n          </table>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"row justify-content-center mt-3 mt-md-5 g-0\">\n      <div class=\"bg-opacity p-3\">\n        <div class=\"col-12 col-md-6 mx-auto\">\n          <h3 class=\"text-center mb-3\">顧客資訊</h3>\n          <div v-if=\"order.user\">\n            <dl class=\"goods-detail-description\">\n              <dt>姓名</dt>\n              <dd>{{ order.user.name }}</dd>\n            </dl>\n            <dl class=\"goods-detail-description\">\n              <dt>寄送地址</dt>\n              <dd>{{ order.user.address }}</dd>\n            </dl>\n            <dl class=\"goods-detail-description\">\n              <dt>E-mail信箱</dt>\n              <dd class=\"text-break\">{{ order.user.email }}</dd>\n            </dl>\n            <dl class=\"goods-detail-description\">\n              <dt>付款方式</dt>\n              <dd>{{ order.user.payment_method }}</dd>\n            </dl>\n          </div>\n        </div>\n        <div class=\"d-flex justify-content-center mt-4\">\n          <button type=\"button\" class=\"btn btn-nobeta\" @click=\"payment()\">\n            <span\n              v-if=\"loadingStatus.loadingItem === 3\"\n              class=\"material-icons animate-spin\"\n            >\n              cached\n            </span>\n            結帳付款<span class=\"fs-5 material-icons mb-1\">\n              arrow_forward\n            </span>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      loadingStatus: {\n        loadingItem: \"\",\n      },\n      order: {},\n    };\n  },\n  methods: {\n    showAlert(res) {\n      this.$swal(res.data.message);\n    },\n    showErrorAlert(error) {\n      this.$swal({\n        title: error,\n        icon: \"error\",\n      });\n    },\n    getOrder() {\n      const id = this.$route.params.id;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${id}`;\n      this.$http\n        .get(url)\n        .then((res) => {\n          this.order = res.data.order;\n        })\n        .catch((error) => {\n          this.showErrorAlert(error);\n        });\n    },\n    payment() {\n      this.loadingStatus.loadingItem = 3;\n      const id = this.$route.params.id;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${id}`;\n      this.$http\n        .post(url)\n        .then((res) => {\n          if (res.data.success) {\n            this.loadingStatus.loadingItem = \"\";\n            this.showAlert(res);\n            this.$router.push(`/cartcompleted/${id}`);\n          }\n        })\n        .catch((error) => {\n          this.showErrorAlert(error);\n        });\n    },\n  },\n  mounted() {\n    // console.clear();\n    this.getOrder();\n  },\n};\n</script>\n","import { render } from \"./CartOrder.vue?vue&type=template&id=64ee63e3\"\nimport script from \"./CartOrder.vue?vue&type=script&lang=js\"\nexport * from \"./CartOrder.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}